{% extends "base.html" %}
{% load static %}

{% block title %}Proyectos | Casos reales con IA en operaciones y datos{% endblock %}

{% block extra_head %}
<meta name="description" content="Galería de proyectos: objetivos, sectores, tecnologías y resultados. Filtra y explora casos reales."/>
<script type="application/ld+json">{
  "@context":"https://schema.org","@type":"BreadcrumbList","itemListElement":[
    {"@type":"ListItem","position":1,"name":"Inicio","item":"{% url 'website:home' %}"},
    {"@type":"ListItem","position":2,"name":"Proyectos","item":""}
  ]}
</script>
{% endblock %}

{% block content %}
<section class="max-w-6xl mx-auto px-4 py-12">
  <div class="flex flex-col md:flex-row md:items-end md:justify-between gap-6">
    <div>
      <h1 class="text-4xl font-extrabold">Proyectos</h1>
      <p class="mt-2 opacity-90">Filtra por objetivo, sector o tecnología.</p>
    </div>
    <form method="get" class="grid sm:grid-cols-3 gap-3 w-full md:w-auto">
      <select name="objetivo" class="form-select">
        <option value="">Objetivo</option>
        {% for o in filtros.objetivos %}<option value="{{ o.value }}" {% if request.GET.objetivo == o.value %}selected{% endif %}>{{ o.label }}</option>{% endfor %}
      </select>
      <select name="sector" class="form-select">
        <option value="">Sector</option>
        {% for s in filtros.sectores %}<option value="{{ s.value }}" {% if request.GET.sector == s.value %}selected{% endif %}>{{ s.label }}</option>{% endfor %}
      </select>
      <select name="tech" class="form-select">
        <option value="">Tech</option>
        {% for t in filtros.techs %}<option value="{{ t.value }}" {% if request.GET.tech == t.value %}selected{% endif %}>{{ t.label }}</option>{% endfor %}
      </select>
      <button class="btn btn-primary">Filtrar</button>
    </form>
  </div>

  <div class="mt-8 grid sm:grid-cols-2 lg:grid-cols-3 gap-6">
    {% for p in proyectos %}
    <article class="rounded-2xl border bg-white overflow-hidden shadow-sm hover:shadow-md transition">
      <a href="{% url 'proyecto_detalle' p.slug %}" class="block">
        <img src="{{ p.cover_url }}" alt="{{ p.titulo }}" class="aspect-video w-full object-cover">
        <div class="p-4">
          <h2 class="text-lg font-bold">{{ p.titulo }}</h2>
          <p class="text-sm opacity-80">{{ p.resumen }}</p>
          <div class="mt-3 flex gap-2 flex-wrap text-xs">
            {% for tag in p.tags %}<span class="px-2 py-1 rounded-full bg-gray-100 border">{{ tag }}</span>{% endfor %}
          </div>
        </div>
      </a>
    </article>
    {% empty %}
      <p>No se encontraron proyectos con esos filtros.</p>
    {% endfor %}
  </div>
</section>
{% endblock %}
