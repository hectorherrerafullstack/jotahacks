{% extends "base.html" %}
{% load static %}

{% block title %}Demos públicas de IA | Prueba en 30–60 segundos{% endblock %}

{% block extra_head %}
<meta name="description" content="Galería de mini‑apps: extractor de facturas, clasificador de tickets, resumen de reuniones, normalizador de SKUs, asistente de políticas y calculadora de ROI."/>
<script type="application/ld+json">{
  "@context":"https://schema.org","@type":"BreadcrumbList","itemListElement":[
    {"@type":"ListItem","position":1,"name":"Inicio","item":"{% url 'website:home' %}"},
    {"@type":"ListItem","position":2,"name":"Demos","item":""}
  ]}
</script>
{% endblock %}

{% block content %}
<section class="max-w-6xl mx-auto px-4 py-12">
  <h1 class="text-4xl font-extrabold">Demos públicas</h1>
  <p class="mt-2 opacity-90">Usa mis mini‑apps en sandbox. Límite: 5 usos/día por IP. Sin guardar contenido, solo métricas anónimas.</p>

  <form method="get" class="mt-6 grid sm:grid-cols-3 gap-3">
    <input type="text" name="q" value="{{ request.GET.q }}" placeholder="Buscar demo…" class="form-input">
    <select name="categoria" class="form-select"><option value="">Categoría</option>{% for c in categorias %}<option value="{{ c.value }}" {% if request.GET.categoria == c.value %}selected{% endif %}>{{ c.label }}</option>{% endfor %}</select>
    <button class="btn btn-primary" type="submit">Buscar</button>
  </form>

  <div class="mt-8 grid sm:grid-cols-2 lg:grid-cols-3 gap-6">
    {% for app in apps %}
    <article class="rounded-2xl border bg-white overflow-hidden shadow-sm">
      <a href="{% url 'app_live' app.slug %}" class="block" data-ga4-event="view_app" data-ga4-label="{{ app.slug }}">
        <img src="{{ app.thumbnail_url }}" alt="{{ app.nombre }}" class="aspect-video w-full object-cover">
        <div class="p-4">
          <h2 class="font-bold">{{ app.nombre }}</h2>
          <p class="text-sm opacity-80">{{ app.descripcion_corta }}</p>
          <div class="mt-3 text-xs flex flex-wrap gap-2">{% for tag in app.tags %}<span class="px-2 py-1 rounded-full bg-gray-100 border">{{ tag }}</span>{% endfor %}</div>
        </div>
      </a>
    </article>
    {% empty %}
    <p>No hay demos por ahora.</p>
    {% endfor %}
  </div>
</section>
{% endblock %}

{% block extra_scripts %}
<script>
  document.querySelectorAll('[data-ga4-event]')?.forEach(el=>{
    el.addEventListener('click',()=>{window.gtag&&gtag('event',el.dataset.ga4Event,{label:el.dataset.ga4Label})});
  })
</script>
{% endblock %}